#! /usr/bin/env python
# encoding: utf-8
#***********************************************************************#
#* Project:    HW-SW SystemC Co-Simulation SoC Validation Platform     *#
#*                                                                     *#
#* File:       wscript                                                 *#
#*             this file contains the build system for the gptimer     *#
#*             tLM model and all its testbenches.                      *#
#*                                                                     *#
#* Modified on $Date: 2010-07-30 15:41:55 +0200 (Fri, 30 Jul 2010) $   *#
#*          at $Revision: 32 $                                         *#
#*                                                                     *#
#* Principal:  European Space Agency                                   *#
#* Author:     VLSI working group @ IDA @ TUBS                         *#
#* Maintainer: Rolf Meyer                                              *#
#***********************************************************************#

top = '..'

def set_options(ctx):
  from os import environ
  ctx.add_option("--verbosity", dest="verbosity", help="Defines the verbosity for the build", default=environ.get("VERBOSITY",""))

def configure(ctx):
  from Options import options
  import os.path
  if options.verbosity and options.verbosity != "":
    ctx.env["CXXFLAGS"] += ['-DVERBOSITY=%s' % (options.verbosity)]

def build(bld):
  bld(
    target         = 'common',
    features       = 'cxx cstaticlib',
    source         = 'verbose.cpp', 
    export_incdirs = '.',
    uselib         = 'SYSC'
  )
  
  bld(
    target       = 'simple.common',
    features     = 'cxx cprogram test',
    source       = 'tests/simple.cpp',
    includes     = '.',
    uselib       = 'SYSC',
    uselib_local = 'common'
  )
 
