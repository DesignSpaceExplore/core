#! /usr/bin/env python
# encoding: utf-8
#***********************************************************************#
#* Project:    HW-SW SystemC Co-Simulation SoC Validation Platform     *#
#*                                                                     *#
#* File:       wscript                                                 *#
#*             this file contains the build system for the gptimer     *#
#*             tLM model and all its testbenches.                      *#
#*                                                                     *#
#* Modified on $Date$   *#
#*          at $Revision$                                         *#
#*                                                                     *#
#* Principal:  European Space Agency                                   *#
#* Author:     VLSI working group @ IDA @ TUBS                         *#
#* Maintainer: Rolf Meyer                                              *#
#***********************************************************************#

top = '..'

def set_options(ctx):
  pass 

def configure(ctx):
  pass

def build(bld):
  #bld(
  #  features = ['cxx', 'cprogram'],
  #  source='tests/top_tlm.cpp',
  #  target='gptimer.test',
  #  includes='. ../utils',
  #  uselib=['BOOST', 'SYSC', 'TLM2', 'AMBA', 'GREENSOCS'],
  #)
  
  bld(
    target       = 'gptimer.speedtest',
    features     = 'cxx cprogram test',
    source       = 'tests/top_tlm.cpp',
    cxxflags     = '-DSPEEDTEST',
    includes     = '.',
    uselib       = 'BOOST SYSC TLM2 AMBA GREENSOCS',
    uselib_local = 'utils tlmsignals',
  )
  
  bld(
    target       = 'gptimer.functiontest',
    features     = ['cxx', 'cprogram', 'test'],
    source       = ['tests/top_tlm.cpp'],
    cxxflags     = ['-DFUNCTIONTEST'],
    includes     = ['.'],
    uselib       = ['BOOST', 'SYSC', 'TLM2', 'AMBA', 'GREENSOCS'],
    uselib_local = ['utils', 'tlmsignals'],
  )

